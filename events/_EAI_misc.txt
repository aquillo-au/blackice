add_namespace = EAI_M

####################################################
# background events
####################################################

country_event = { #mobile warfare doctrine tech switch to manpower branch
	id = EAI_M.3
	hidden = yes
	mean_time_to_happen = { days = 2 }
	trigger = {
		is_ai = yes
		has_idea = cons_barrel
		has_manpower < 1000000
		has_tech = modern_blitzkrieg
		NOT = { has_country_flag = volkssturm_taken }
	}
	immediate = {
		set_country_flag = volkssturm_taken

		set_technology = { firebrigades = 0 }
		set_technology = { backhand_blow = 0 }
		set_technology = { modern_blitzkrieg = 0 }

		set_technology = { volkssturm = 1 }
	}
	option = {}
}

#Mobilization Law, is already done with on_declare_war and on_wargoal_justification, but just to be 100% sure. f.e. if a nation joins a war
country_event = {
	id = EAI_M.1
	hidden = yes

	mean_time_to_happen = { days = 2 }

	trigger = {
		is_ai = yes
		has_war = yes
		NOT = { has_idea = mob_general }
	}
	
	option = { add_political_power = -25 add_ideas = mob_general }
}

#Automatically switch to most benefitial economy law, also to set back to civilian after a war
country_event = { 
	id = EAI_M.100
	hidden = yes
	mean_time_to_happen = { days = 2 }
	trigger = {
		is_ai = yes
		OR = {
			
			#Low Economy
			AND = {
				OR = {
					threat > 0.15
					has_war = yes
					has_government = fascism
					has_government = communism
				}
				threat < 0.31 
				NOT = { has_idea = low_economic_mobilisation }
				if = {
					limit = {
						original_tag = HUN
						has_dlc = "Death or Dishonor"
					}
					NOT = { has_idea = HUN_treaty_of_triannon }
				}
			}
			
			#Partial Economy
			AND = {
				OR = {
					threat > 0.30
					has_war = yes
					has_government = fascism
					has_government = communism
				}
				threat < 0.51
				NOT = { has_idea = partial_economic_mobilisation }
				if = {
					limit = {
						original_tag = HUN
						has_dlc = "Death or Dishonor"
					}
					OR = {
						has_completed_focus = HUN_secret_rearmament
						NOT = { has_idea = HUN_treaty_of_triannon }
					}
				}
			}
			
			#War Economy
			AND = {
				OR = {
					has_government = fascism
					has_government = communism
					has_war = yes
				}
				threat > 0.50
				NOT = { has_idea = war_economy }
				if = {
					limit = {
						original_tag = HUN
						has_dlc = "Death or Dishonor"
					}
					OR = {
						has_completed_focus = HUN_secret_rearmament
						NOT = { has_idea = HUN_treaty_of_triannon }
					}
				}
			}
		
		}
	}
	
	immediate = {
		#Low economy
		if = { limit = { OR = { threat > 0.15 has_government = fascism has_government = communism has_war = yes } threat < 0.31 NOT = { has_idea = low_economic_mobilisation } }
		add_ideas = low_economic_mobilisation
		}
	
		#Partial economy
		if = { limit = { OR = { threat > 0.30 has_government = fascism has_government = communism has_war = yes } threat < 0.51 NOT = { has_idea = partial_economic_mobilisation } }
		add_ideas = partial_economic_mobilisation
		}
	
		#War economy
		if = { limit = { OR = { has_war = yes has_government = fascism has_government = communism } threat > 0.50 NOT = { has_idea = war_economy } }
		add_ideas = war_economy
		}
	}
	
	option = {}
	
}

#Poland
country_event = {
	id = EAI_M.101
	hidden = yes
	
	is_triggered_only = yes
	
	option = {
		delete_unit_template_and_units = { division_template = "Brygada Kawalerii" }
		delete_unit_template_and_units = { division_template = "Brygada KOP" }
		load_oob = "1936_POL_AI"
	}
	
}

#Germany
country_event = {
	id = EAI_M.102
	hidden = yes
	
	is_triggered_only = yes
	
	option = {
		delete_unit_template_and_units = { division_template = "Infanterie-Division (halbmot.)" }
	}
	
}

#UK
country_event = {
	id = EAI_M.103
	hidden = yes
	
	is_triggered_only = yes
	
	option = {
		delete_unit_template_and_units = { division_template = "Territorial Division" }
		delete_unit_template_and_units = { division_template = "African Division" }
		delete_unit_template_and_units = { division_template = "Fortress Garrison" }
		delete_unit_template_and_units = { division_template = "Regular Garrison" }
		delete_unit_template_and_units = { division_template = "Colonial Volunteer Fortress Garrison" }
		delete_unit_template_and_units = { division_template = "Local Defence Force" }
		delete_unit_template_and_units = { division_template = "Small Colonial Garrison" }
		load_oob = "1936_ENG_AI" 
	}
	
}

country_event = {
	id = EAI_M.104
	hidden = yes
	
	is_triggered_only = yes
	
	option = {
		set_global_flag = no_EAI
	}
	
	option = {
		clr_global_flag = no_EAI
	}
	
}

country_event = {
	id = EAI_M.105
	title = EAI_M.105.t
	desc = EAI_M.105.desc
	
	is_triggered_only = yes
	
	option = {
		name = "Okay"
	}
	
	option = {
		name = "Hide these Events"
		set_country_flag = hidden_partisan
	}	
}

country_event = {
	id = EAI_M.106
	hidden = yes
	
	fire_only_once = yes
	
	trigger = {
		always = no
		tag = INS 
		is_ai = yes
		HOL = { is_ai = yes }
		INS = { is_puppet_of = HOL }
		GER = { 
			has_government = fascism
			OR = {
				has_war_with = HOL
				focus_progress = {
					focus = GER_around_maginot
					progress > 0.01
				}
				#is_justifying_wargoal_against = HOL
			}
		}
	}
				
	option = {
		#INS = { 
		##	transfer_navy = HOL
		#}
	}
	
	
}

country_event = {
	id = EAI_M.107
	hidden = yes
	
	is_triggered_only = yes
				
	option = {
		set_technology = { tech_gladiator_fighter_equipment_1 = 1 }
		every_country = {
			clr_country_flag = money
			set_variable = { oil_storage = 5000 }
			set_variable = { rubber_storage = 5000 }
			set_variable = { steel_storage = 5000 }
			set_variable = { chromium_storage = 5000 }
			set_variable = { aluminium_storage = 5000 }
			set_variable = { tungsten_storage = 5000 }
		}
	}
	
	option = {
		every_country = {
			clr_country_flag = money
		}
	}
	
	option = {
		set_variable = { idea_cost_train_none = 50 }
		set_variable = { idea_cost_train_low = 75 }
		set_variable = { idea_cost_train_medium = 100 }
		set_variable = { idea_cost_train_high = 125 }
		set_variable = { idea_cost_train_elite = 150 }
		
		set_variable = { idea_cost_officer_train_none = 25 }
		set_variable = { idea_cost_officer_train_low = 75 }
		set_variable = { idea_cost_officer_train_high = 100 }
		set_variable = { idea_cost_officer_train_elite = 150 }
	}
	
	option = {
		set_country_flag = deplete_oil_storage
		set_country_flag = deplete_rubber_storage
		clr_country_flag = fill_oil_storage
		clr_country_flag = fill_rubber_storage
	}
}

#Manpower Law Changes - very basic for now
country_event = {
	id = EAI_M.108
	hidden = yes
	
	trigger = {
		is_ai = yes
		democratic_govt = yes
		manpower_per_military_factory < 2000
		has_war = no
		NOT = {
			has_idea = cons_one 
		}
	}	
	mean_time_to_happen = { days = 2 }
	option = {
		ai_chance = { factor = 100  }
		add_ideas = cons_one
		activate_decision= AI_mobilization
	}
}

country_event = {
	id = EAI_M.1080
	hidden = yes
	
	trigger = {
		is_ai = yes
		NOT = { democratic_govt = yes }
		manpower_per_military_factory < 2000
		has_war = no
		NOT = {
			has_idea = cons_three
		}
	}	
	mean_time_to_happen = { days = 2 }
	option = {
		ai_chance = { factor = 100  }
		add_ideas = cons_three
		activate_decision= AI_mobilization
	}
}

country_event = {
	id = EAI_M.109
	hidden = yes
	
	trigger = {
		is_ai = yes
		manpower_per_military_factory < 1800
		has_war = no
		NOT = {
			has_idea = age_17 
		}
	}
	mean_time_to_happen = { days = 2 }
	option = {
		ai_chance = { factor = 100  }
		add_ideas = age_17
		activate_decision= AI_mobilization
	}
}

country_event = {
	id = EAI_M.110
	hidden = yes
	
	trigger = {
		is_ai = yes
		manpower_per_military_factory < 1600
		has_war = yes
		NOT = {
			has_idea = cons_three 
		}
	}		
	mean_time_to_happen = { days = 2 }
	option = {
		ai_chance = { factor = 100  }
		add_ideas = cons_three
		activate_decision= AI_mobilization
	}
}


country_event = {
	id = EAI_M.111
	hidden = yes
	
	trigger = {
		is_ai = yes
		manpower_per_military_factory < 1000
		has_war = yes
		NOT = {
			has_idea = cons_expanded_draft
		}
	}	
	mean_time_to_happen = { days = 2 }
	option = {
		ai_chance = { factor = 100  }
		add_ideas = cons_expanded_draft
		activate_decision= AI_mobilization
	}
}

country_event = {
	id = EAI_M.112
	hidden = yes
	
	trigger = {
		is_ai = yes
		manpower_per_military_factory < 1000
		has_war = yes
		NOT = {
			has_idea = age_15
		}
	}
	mean_time_to_happen = { days = 2 }
	option = {
		ai_chance = { factor = 100  }
		add_ideas = age_15
		activate_decision= AI_mobilization
	}
}

country_event = {
	id = EAI_M.201
	hidden = yes
	
	is_triggered_only = yes
	
	option = {
		ai_chance = { factor = 100  }
		if = {
			limit = {
				has_country_flag = mob_reserve
			}
			add_timed_idea = { idea = mobilisation_1 days = 14 }
			set_country_flag = Organizing
			add_ideas = Organizing
			country_event = { id = EAI_M.301 days = 7 }
		}
		set_country_flag = mob_standing
		clr_country_flag = mob_reserve
		clr_country_flag = mob_general
		clr_country_flag = mob_limited
	}
}

country_event = {
	id = EAI_M.202
	hidden = yes
	
	is_triggered_only = yes
	
	option = {
		ai_chance = { factor = 100  }
		if = {
			limit = {
				has_country_flag = mob_standing
			}
			#remove_ideas = mobilisation_6
			add_timed_idea = { idea = mobilisation_7 days = 14 }
			set_country_flag = Organizing
			add_ideas = Organizing
			country_event = { id = EAI_M.302 days = 7 }
		}
		set_country_flag = mob_limited
		clr_country_flag = mob_reserve			
		clr_country_flag = mob_standing
		clr_country_flag = mob_general
	}
}

country_event = {
	id = EAI_M.203
	hidden = yes
	
	is_triggered_only = yes
	
	option = {
		ai_chance = { factor = 100  }
		if = {
			limit = {
				has_country_flag = mob_limited
			}
			#remove_ideas = mobilisation_11
			add_timed_idea = { idea = mobilisation_12 days = 14 }
			set_country_flag = Organizing
			add_ideas = Organizing
			country_event = { id = EAI_M.303 days = 7 }
		}
		set_country_flag = mob_general
		clr_country_flag = mob_limited
		clr_country_flag = mob_reserve
		clr_country_flag = mob_standing
	}
}

country_event = {
	id = EAI_M.301
	hidden = yes
	
	is_triggered_only = yes
	
	
	option = {
		ai_chance = { factor = 100  }
		trigger = {
			has_idea = mobilisation_1
		}
		remove_ideas = mobilisation_1
		add_timed_idea = { idea = mobilisation_2 days = 14 }
		country_event = { id = EAI_M.301 days = 7 }
	}
	
	option = {
		ai_chance = { factor = 100  }
		trigger = {
			has_idea = mobilisation_2
		}
		remove_ideas = mobilisation_2
		add_timed_idea = { idea = mobilisation_3 days = 14 }
		country_event = { id = EAI_M.301 days = 7 }
	}
	
	option = {
		ai_chance = { factor = 100  }
		trigger = {
			has_idea = mobilisation_3
		}
		remove_ideas = mobilisation_3
		add_timed_idea = { idea = mobilisation_4 days = 14 }
		country_event = { id = EAI_M.301 days = 7 }
	}
	
	option = {
		ai_chance = { factor = 100  }
		trigger = {
			has_idea = mobilisation_4
		}
		remove_ideas = mobilisation_4
		add_timed_idea = { idea = mobilisation_5 days = 14 }
		country_event = { id = EAI_M.301 days = 7 }
	}
	
	option = {
		ai_chance = { factor = 100  }
		trigger = {
			has_idea = mobilisation_5
		}
		remove_ideas = mobilisation_5
		remove_ideas = Organizing
		clr_country_flag = Organizing
		add_ideas = mob_standing
		
		country_event = EAI_M.310 #inform the player
		
		set_country_flag = mob_standing_active
		clr_country_flag = mob_limited_active
		clr_country_flag = mob_general_active
	}
}

country_event = {
	id = EAI_M.302
	hidden = yes
	
	is_triggered_only = yes
	
	
	option = {
		ai_chance = { factor = 100 }
		trigger = {
			has_idea = mobilisation_7
		}
		remove_ideas = mobilisation_7
		add_timed_idea = { idea = mobilisation_8 days = 14 }
		country_event = { id = EAI_M.302 days = 7 }
	}
	
	option = {
		ai_chance = { factor = 100  }
		trigger = {
			has_idea = mobilisation_8
		}
		remove_ideas = mobilisation_8
		add_timed_idea = { idea = mobilisation_9 days = 14 }
		country_event = { id = EAI_M.302 days = 7 }
	}
	
	option = {
		ai_chance = { factor = 100  }
		trigger = {
			has_idea = mobilisation_9
		}
		remove_ideas = mobilisation_9
		add_timed_idea = { idea = mobilisation_10 days = 14 }
		country_event = { id = EAI_M.302 days = 7 }
	}
	
	option = {
		ai_chance = { factor = 100  }
		trigger = {
			has_idea = mobilisation_10
		}
		remove_ideas = mobilisation_10
		remove_ideas = Organizing
		remove_ideas = Organizing	
		add_ideas = mob_limited
		
		country_event = EAI_M.311 #inform the player
		
		clr_country_flag = mob_standing_active
		set_country_flag = mob_limited_active
		clr_country_flag = mob_general_active
	}
	
}

country_event = {
	id = EAI_M.303
	hidden = yes
	
	is_triggered_only = yes
	
	
	option = {
		ai_chance = { factor = 100  }
		trigger = {
			has_idea = mobilisation_12
		}
		remove_ideas = mobilisation_12
		add_timed_idea = { idea = mobilisation_13 days = 14 }
		country_event = { id = EAI_M.303 days = 7 }
	}
	
	option = {
		ai_chance = { factor = 100  }
		trigger = {
			has_idea = mobilisation_13
		}
		remove_ideas = mobilisation_13
		add_timed_idea = { idea = mobilisation_14 days = 14 }
		country_event = { id = EAI_M.303 days = 7 }
	}
	
	option = {
		ai_chance = { factor = 100  }
		trigger = {
			has_idea = mobilisation_14
		}
		remove_ideas = mobilisation_14
		add_timed_idea = { idea = mobilisation_15 days = 14 }
		country_event = { id = EAI_M.303 days = 7 }
	}
	
	option = {
		ai_chance = { factor = 100  }
		trigger = {
			has_idea = mobilisation_15
		}
		remove_ideas = mobilisation_15
		remove_ideas = Organizing
		clr_country_flag = Organizing
		add_ideas = mob_general
		
		country_event = EAI_M.312 #inform the player
		
		clr_country_flag = mob_standing_active
		clr_country_flag = mob_limited_active
		set_country_flag = mob_general_active
	}
}

country_event = {
	id = EAI_M.310
	title = EAI_M.310.t
	desc = EAI_M.310.desc
	
	is_triggered_only = yes
	
	option = {
		ai_chance = { factor = 100  }
		name = EAI_M.310.a
	}
}

country_event = {
	id = EAI_M.311
	title = EAI_M.311.t
	desc = EAI_M.311.desc
	
	is_triggered_only = yes
	
	option = {
		ai_chance = { factor = 100  }
		name = EAI_M.311.a
	}
}

country_event = {
	id = EAI_M.312
	title = EAI_M.312.t
	desc = EAI_M.312.desc
	
	is_triggered_only = yes
	
	option = {
		ai_chance = { factor = 100  }
		name = EAI_M.312.a
	}
}

country_event = {
	id = EAI_M.313
	title = EAI_M.313.t
	desc = EAI_M.313.desc
	
	is_triggered_only = yes
	
	option = {
		ai_chance = { factor = 100  }
		name = EAI_M.313.a
		random_owned_controlled_state = {
			limit = { arms_factory > 0 }
			remove_building = {
				type = arms_factory
				level = 1
			}
			if = {
				limit = {
					NOT = { has_variable = MIC_remove }
				}
				set_variable = { MIC_remove = 0 }
			}
			add_to_variable = { MIC_remove = 1 }
			add_to_variable = { Root.total_MIC_remove = 1 }
		}
	}
}

country_event = {
	id = EAI_M.314
	title = EAI_M.314.t
	desc = EAI_M.314.desc
	
	is_triggered_only = yes
	
	option = {
		ai_chance = { factor = 100  }
		name = EAI_M.314.a
		random_army_leader = {
			limit = { 	
				skill  > 3
				is_assigned = yes
			}
			add_temporary_buff_to_units = {
				combat_offense = -0.2
				combat_breakthrough = -0.2
				
				days = 60
				tooltip = NO_WAGES
			}
		}
	}
}

country_event = {
	id = EAI_M.315
	title = EAI_M.315.t
	desc = EAI_M.315.desc
	
	is_triggered_only = yes
	
	option = {
		ai_chance = { factor = 100 }
		name = EAI_M.315.a
		set_temp_variable = { soldiers_deserting = dx }
		set_temp_variable = { amount_div = num_divisions }
		divide_temp_variable = { amount_div = 2 }
		multiply_temp_variable = { soldiers_deserting = amount_div }
		round_variable = soldiers_deserting
		add_manpower = soldiers_deserting
	}
}

state_event = {
	id = EAI_M.401
	hidden = yes
	
	is_triggered_only = yes
	
	immediate = {
		add_state_modifier = {
			modifier = {
				local_supplies = -0.5
			}
		}
		clr_state_flag = partisan_modifier 
				clr_state_flag = supply_modifier 
				clr_state_flag = resource_modifier 
				clr_state_flag = manpower_modifier 
				clr_state_flag = intel_modifier 
				clr_state_flag = factory_damage_modifier 
				clr_state_flag = slot_modifier 
				clr_state_flag = occupation_modifier 
				clr_state_flag = attrition_modifier
				clr_state_flag = factories_modifier
	}
}
	
### EOF ###