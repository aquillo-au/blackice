add_namespace = EAI_M

####################################################
# background events
####################################################

country_event = { #mobile warfare doctrine tech switch to manpower branch
	id = EAI_M.3
	hidden = yes
	mean_time_to_happen = { days = 2 }
	trigger = {
		is_ai = yes
		has_idea = cons_barrel
		has_manpower < 1000000
		has_tech = modern_blitzkrieg
		NOT = { has_country_flag = volkssturm_taken }
	}
	immediate = {
		set_country_flag = volkssturm_taken

		set_technology = { firebrigades = 0 }
		set_technology = { backhand_blow = 0 }
		set_technology = { modern_blitzkrieg = 0 }

		set_technology = { volkssturm = 1 }
	}
	option = {}
}

#Mobilization Law, is already done with on_declare_war and on_wargoal_justification, but just to be 100% sure. f.e. if a nation joins a war
country_event = {
	id = EAI_M.1
	hidden = yes

	mean_time_to_happen = { days = 2 }

	trigger = {
		is_ai = yes
		has_war = yes
		NOT = { has_idea = mob_general }
	}
	
	option = { add_political_power = -25 add_ideas = mob_general }
}

#Automatically switch to most benefitial economy law, also to set back to civilian after a war
country_event = { 
	id = EAI_M.100
	hidden = yes
	mean_time_to_happen = { days = 2 }
	trigger = {
		is_ai = yes
		OR = {
			
			#Low Economy
			AND = {
				OR = {
					threat > 15
					has_war = yes
					has_government = fascism
					has_government = communism
				}
				threat < 31 
				NOT = { has_idea = low_economic_mobilisation }
				if = {
					limit = {
						original_tag = HUN
						has_dlc = "Death or Dishonor"
					}
					NOT = { has_idea = HUN_treaty_of_triannon }
				}
			}
			
			#Partial Economy
			AND = {
				OR = {
					threat > 30
					has_war = yes
					has_government = fascism
					has_government = communism
				}
				threat < 51
				NOT = { has_idea = partial_economic_mobilisation }
				if = {
					limit = {
						original_tag = HUN
						has_dlc = "Death or Dishonor"
					}
					OR = {
						has_completed_focus = HUN_secret_rearmament
						NOT = { has_idea = HUN_treaty_of_triannon }
					}
				}
			}
			
			#War Economy
			AND = {
				OR = {
					has_government = fascism
					has_government = communism
					has_war = yes
				}
				threat > 50
				NOT = { has_idea = war_economy }
				if = {
					limit = {
						original_tag = HUN
						has_dlc = "Death or Dishonor"
					}
					OR = {
						has_completed_focus = HUN_secret_rearmament
						NOT = { has_idea = HUN_treaty_of_triannon }
					}
				}
			}
		
		}
	}
	
	immediate = {
		#Low economy
		if = { limit = { OR = { threat > 15 has_government = fascism has_government = communism has_war = yes } threat < 31 NOT = { has_idea = low_economic_mobilisation } }
		add_ideas = low_economic_mobilisation
		}
	
		#Partial economy
		if = { limit = { OR = { threat > 30 has_government = fascism has_government = communism has_war = yes } threat < 51 NOT = { has_idea = partial_economic_mobilisation } }
		add_ideas = partial_economic_mobilisation
		}
	
		#War economy
		if = { limit = { OR = { has_war = yes has_government = fascism has_government = communism } threat > 50 NOT = { has_idea = war_economy } }
		add_ideas = war_economy
		}
	}
	
	option = {}
	
}

#Planned : Events to give AI equipment if f.e. infantry_euipment = -10000