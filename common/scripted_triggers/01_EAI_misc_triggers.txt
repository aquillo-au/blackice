
######################################################
#	CONSTRUCTION
######################################################
democratic_nation = {
	OR = {
		has_government = conservatism
		has_government = liberalism
		has_government = socialism
	}
}
communist_nation = {
	OR = {
		has_government = communism
		AND = { has_government = neutrality communism > 0.5 }
	}
}
fascist_nation = {
	OR = {
		has_government = fascism
		AND = { has_government = neutrality fascism > 0.5 }
	}
}
nonaligned_nation = {
	AND = {
		has_government = neutrality
		NOT = {
			conservatism > 0.5
			liberalism > 0.5
			socialism > 0.5
			communism > 0.5
			fascism > 0.5
		}
	}
}
available_AIR = { # air bases
	CONTROLLER = { OR = { tag = ROOT AND = { is_puppet_of = ROOT OR = { has_autonomy_state = autonomy_integrated_puppet has_autonomy_state = autonomy_puppet has_autonomy_state = autonomy_colony } } } }
	free_building_slots = { building = air_base size > 0 include_locked = no }
	NOT = { free_building_slots = { building = air_base size < 7 include_locked = no } }
	NOT = {
		any_neighbor_state = {
			CONTROLLER = { OR = { tag = ROOT AND = { is_puppet_of = ROOT OR = { has_autonomy_state = autonomy_integrated_puppet has_autonomy_state = autonomy_puppet has_autonomy_state = autonomy_colony } } } }
			free_building_slots = { building = air_base size < 7 include_locked = no }
		}
	}
}

available_RADAR = {
	is_controlled_by = ROOT

	free_building_slots = { building = radar_station size > 0 include_locked = no }
}

available_INF = {
	is_controlled_by = ROOT
	free_building_slots = { building = infrastructure size > 0 include_locked = no }
}

no_border = {
	NOT = { any_neighbor_state = { NOT = { is_controlled_by = ROOT } } }
}

no_enemy_border = {
	NOT = { any_neighbor_state = { CONTROLLER = { has_war_with = ROOT } } }
}

available_REF = {
	free_building_slots = { building = synthetic_refinery size > 0 include_locked = no }
}

available_RUB = {
	free_building_slots = { building = synthetic_rubber_refinery size > 0 include_locked = no }
}

available_NIC = {
	free_building_slots = { building = dockyard size > 0 include_locked = no }
}

available_SHIPYARD = {
	free_building_slots = { building = shipyard size > 0 include_locked = no }
}

available_SUBYARD = {
	free_building_slots = { building = subyard size > 0 include_locked = no }
}

available_state_10 = { # 100% infr
	is_controlled_by = ROOT

	free_building_slots = { building = infrastructure size < 1 include_locked = no }

	free_building_slots = { building = dummy size > 0 include_locked = no }
}

available_state_9 = { # 90% infr
	is_controlled_by = ROOT

	free_building_slots = { building = infrastructure size < 2 include_locked = no }

	free_building_slots = { building = dummy size > 0 include_locked = no }
}

available_state_8 = { # 80% infr
	is_controlled_by = ROOT

	free_building_slots = { building = infrastructure size < 3 include_locked = no }

	free_building_slots = { building = dummy size > 0 include_locked = no }
}

available_state_7 = { # 70% infr
	is_controlled_by = ROOT

	free_building_slots = { building = infrastructure size < 4 include_locked = no }

	free_building_slots = { building = dummy size > 0 include_locked = no }
}

available_state_6 = { # 60% infr
	is_controlled_by = ROOT

	free_building_slots = { building = infrastructure size < 5 include_locked = no }

	free_building_slots = { building = dummy size > 0 include_locked = no }
}

available_state_5 = { # 50% infr
	is_controlled_by = ROOT

	free_building_slots = { building = infrastructure size < 6 include_locked = no }

	free_building_slots = { building = dummy size > 0 include_locked = no }
}

available_state_4 = { # 40% infr
	is_controlled_by = ROOT

	free_building_slots = { building = infrastructure size < 7 include_locked = no }

	free_building_slots = { building = dummy size > 0 include_locked = no }
}

available_state_3 = { # 30% infr
	is_controlled_by = ROOT

	free_building_slots = { building = infrastructure size < 8 include_locked = no }

	free_building_slots = { building = dummy size > 0 include_locked = no }
}

available_state_2 = { # 20% infr
	is_controlled_by = ROOT

	free_building_slots = { building = infrastructure size < 9 include_locked = no }

	free_building_slots = { building = dummy size > 0 include_locked = no }
}

available_state_1 = { # 10% infr
	is_controlled_by = ROOT

	free_building_slots = { building = infrastructure size < 10 include_locked = no }

	free_building_slots = { building = dummy size > 0 include_locked = no }
}

available_state_0 = { # 0% infr
	is_controlled_by = ROOT

	free_building_slots = { building = infrastructure size < 11 include_locked = no }

	free_building_slots = { building = dummy size > 0 include_locked = no }
}

radar_location = { # all existing radar locations
	OR = {
		state = 282 #tokyo
		state = 645 #iwo jima
		state = 648 #marcus
		state = 684 #caroline
		state = 646 #saipan
		state = 629 #hawaii
		state = 632 #wake
		state = 336 #singapore

		state = 631 #midway
		state = 630 #johnston

		state = 327 #manila
		state = 422 #ceylon

		state = 219 #moscow
		state = 217 #stalingrad
		state = 137 #sevastopol
		state = 195 #leningrad

		state = 116 #malta
		state = 118 #gibraltar
		state = 126 #london
		state = 446 #cairo

		state = 361 #washington
		state = 378 #san francisco
		state = 386 #seattle
		state = 366 #florida

		state = 685 #panama

		state = 60  #thuringen
		state = 5 	#ostpreussen

		state = 2 	#rome

		state = 41	#madrid

		state = 16	#paris

		state = 341 #istanbul

		radar_station > 1

		has_state_flag = radar_site
	}
}

radar_location_2 = { # good radar locations
	OR = {
		state = 282 #tokyo
		state = 645 #iwo jima
		state = 648 #marcus
		state = 684 #caroline
		state = 646 #saipan
		state = 629 #hawaii
		state = 632 #wake
		state = 336 #singapore

		state = 631 #midway
		state = 630 #johnston

		state = 327 #manila
		state = 422 #ceylon

		state = 219 #moscow
		state = 217 #stalingrad
		state = 137 #sevastopol
		state = 195 #leningrad

		state = 116 #malta
		state = 118 #gibraltar
		state = 126 #london
		state = 446 #cairo

		state = 361 #washington
		state = 378 #san francisco
		state = 386 #seattle
		state = 366 #florida

		state = 685 #panama

		state = 60  #thuringen
		state = 5 	#ostpreussen

		state = 2 	#rome

		state = 41	#madrid

		state = 16	#paris

		state = 341 #istanbul
	}
}

region_priority = { # prioritise building in a certain area
	OR = {
		AND = { ROOT = { NOT = { original_tag = SOV original_tag = CHI } } is_in_home_area = yes }

		AND = { ROOT = { original_tag = SOV } central_russia = yes }

		AND = { ROOT = { original_tag = CHI } western_china = yes }
	}
}

restrict_location = { # force the AI to build in the region priority area
	OR = {
		ROOT = { original_tag = SOV }
	}
}

central_russia = {
	OR = {
		region = 149
		region = 152
		region = 134
		region = 135
		region = 147
		region = 14
		region = 151
		region = 136
		region = 138
		region = 150
		region = 40
		region = 137
		region = 133
		region = 251
	}
	NOT = {
		state = 240
		state = 223
		state = 222
		state = 220
		state = 240
		state = 260
		state = 258
		state = 245
		state = 218
		state = 234
		state = 231
		state = 230
	}
}

western_china = {
	OR = { region = 164 region = 165 region = 144 region = 145 }
	NOT = { is_coastal = yes }
}

######################################################
#	laws
######################################################

############ eco laws

can_take_civilian_economy = {
	########## AI LOGIC

	NOT = {
		can_take_low_economic_mobilisation = yes
		can_take_partial_economic_mobilisation = yes
		can_take_war_economy = yes
		can_take_tot_economic_mobilisation = yes
	}

	NOT = {
		has_idea = low_economic_mobilisation
		has_idea = partial_economic_mobilisation
		has_idea = war_economy
		has_idea = tot_economic_mobilisation
	}

	NOT = { original_tag = USA }

	########## LAW REQUIREMENTS

	NOT = { has_idea = civilian_economy }

	NOT = { has_idea = undisturbed_isolation has_idea = isolation }
}

can_take_low_economic_mobilisation = {
	########## AI LOGIC

	NOT = {
		can_take_partial_economic_mobilisation = yes
		can_take_war_economy = yes
		can_take_tot_economic_mobilisation = yes
	}

	NOT = {
		has_idea = partial_economic_mobilisation
		has_idea = war_economy
		has_idea = tot_economic_mobilisation
	}

	########## LAW REQUIREMENTS

	NOT = { has_idea = low_economic_mobilisation }

	NOT = { has_idea = undisturbed_isolation has_idea = isolation }

	OR = {
		has_government = fascism
		has_government = communism
		has_war = yes
		threat > 0.05
	}

	if = {
		limit = {
			original_tag = HUN
			has_dlc = "Death or Dishonor"
		}
		NOT = { has_idea = HUN_treaty_of_triannon }
	}
}

can_take_partial_economic_mobilisation = {
	########## AI LOGIC

	NOT = {
		can_take_war_economy = yes
		can_take_tot_economic_mobilisation = yes
	}

	NOT = {
		has_idea = war_economy
		has_idea = tot_economic_mobilisation
	}

	########## LAW REQUIREMENTS

	NOT = { has_idea = partial_economic_mobilisation }

	NOT = { has_idea = undisturbed_isolation has_idea = isolation }

	OR = {
		has_government = fascism
		has_government = communism
		has_war = yes
		threat > 0.15
	}

	if = {
		limit = {
			original_tag = HUN
			has_dlc = "Death or Dishonor"
		}
		OR = {
			has_completed_focus = HUN_secret_rearmament
			NOT = { has_idea = HUN_treaty_of_triannon }
		}
	}
}

can_take_war_economy = {
	########## AI LOGIC

	NOT = {
		can_take_tot_economic_mobilisation = yes
	}

	OR = {
		NOT = { has_idea = tot_economic_mobilisation }

		AND = {
			has_idea = tot_economic_mobilisation

			NOT = { has_manpower > 1000000 }

			OR = {
				#has_idea = all_adults_serve
				#has_idea = scraping_the_barrel
				#has_idea = service_by_requirement
			}
		}
	}

	########## LAW REQUIREMENTS

	NOT = { has_idea = war_economy }

	NOT = { has_idea = undisturbed_isolation has_idea = isolation }

	threat > 0.15
	OR = {
		has_government = fascism
		has_government = communism
		custom_trigger_tooltip = { tooltip = or_clarification_tooltip always = no }
		AND = {
			has_war = yes
			any_enemy_country = {
				ic_ratio = {
					tag = ROOT
					ratio > 0.4
				}
			}
		}
	}

	if = {
		limit = {
			original_tag = HUN
			has_dlc = "Death or Dishonor"
		}
		NOT = { has_idea = HUN_treaty_of_triannon }
	}
}

can_take_tot_economic_mobilisation = {
	########## AI LOGIC

	original_tag = SOV

	has_manpower > 1000000

	NOT = {
		#has_idea = service_by_requirement
		#has_idea = all_adults_serve
		#has_idea = scraping_the_barrel
	}

	########## LAW REQUIREMENTS

	NOT = { has_idea = tot_economic_mobilisation }

	NOT = { has_idea = undisturbed_isolation has_idea = isolation }

	has_war = yes
	threat > 0.2
	any_enemy_country = {
		ic_ratio = {
			tag = ROOT
			ratio > 0.5
		}
	}

	if = {
		limit = {
			original_tag = HUN
			has_dlc = "Death or Dishonor"
		}
		NOT = { has_idea = HUN_treaty_of_triannon }
	}
}

############ conscription laws
#Done by modifiers
########### trade laws

can_take_free_trade = {
	########## AI LOGIC

	OR = {
		AND = {
			original_tag = USA
			num_of_military_factories < 120
		}
		AND = {
			original_tag = SOV
			num_of_military_factories < 80
		}
		AND = {
			original_tag = GER
			num_of_military_factories < 70
		}
		AND = {
			NOT = { major_country = yes }
			num_of_military_factories < 50
		}
	}

	########## LAW REQUIREMENTS

	NOT = { has_idea = free_trade }
}

can_take_export_focus = {
	########## AI LOGIC

	OR = {
		AND = {
			original_tag = USA
			num_of_military_factories < 275
			NOT = { num_of_military_factories < 120 }
		}
		AND = {
			original_tag = SOV
			num_of_military_factories < 125
			NOT = { num_of_military_factories < 80 }
		}
		AND = {
			original_tag = GER
			num_of_military_factories < 200
			NOT = { num_of_military_factories < 70 }
		}
		AND = {
			original_tag = ENG
			num_of_military_factories < 150
		}
		AND = {
			original_tag = FRA
			num_of_military_factories < 100
		}
		AND = {
			NOT = { major_country = yes }
			num_of_military_factories < 75
			NOT = { num_of_military_factories < 50 }
		}
	}

	########## LAW REQUIREMENTS

	NOT = { has_idea = export_focus }
}

can_take_limited_exports = {
	########## AI LOGIC

	OR =  {
		original_tag = ITA
		original_tag = JAP
		AND = {
			original_tag = GER
			NOT = { num_of_military_factories < 200 }
		}
		AND = {
			original_tag = SOV
			NOT = { num_of_military_factories < 125 }
		}
		AND = {
			original_tag = USA
			NOT = { num_of_military_factories < 275 }
		}
		AND = {
			original_tag = ENG
			NOT = { num_of_military_factories < 150 }
		}
		AND = {
			original_tag = FRA
			NOT = { num_of_military_factories < 100 }
		}
		AND = {
			NOT = { major_country = yes }
			NOT = { num_of_military_factories < 75 }
		}
	}

	########## LAW REQUIREMENTS

	NOT = { has_idea = limited_exports }

	OR = {
		AND = {
			OR = {
			has_government = socialism
			has_government = liberalism
			has_government = conservatism
			}
			has_war = yes
			any_enemy_country = {
				ic_ratio = {
					tag = ROOT
					ratio > 0.2
				}
			}
		}
		AND = {
			NOT = { has_government = conservatism
					has_government = liberalism
					has_government = socialism 	}
			OR = {
				has_idea = partial_economic_mobilisation
				has_idea = war_economy
				has_idea = tot_economic_mobilisation
			}
		}
	}
}

can_take_closed_economy = {
	########## AI LOGIC

	########## LAW REQUIREMENTS

	NOT = { has_idea = closed_economy }

	has_war = yes
	OR = {
		has_government = fascism
		has_government = communism
	}
	OR = {
		has_idea = war_economy
		has_idea = tot_economic_mobilisation
	}
	OR = {
		NOT = {	tag = SOV }
		NOT = { has_opinion_modifier = MR_pact }
	}
}

######################################################
#	MISC
######################################################

dont_invade = { # prevent invasions against a specific tag when it is a bad idea
	strength_ratio = { tag = ROOT ratio > 0.5 }

	any_state = {
		is_controlled_by = PREV
		is_in_home_area = yes

		any_neighbor_state = {
			is_controlled_by = ROOT
			is_in_home_area = yes
		}
	}
}

major_country = { # true majors in the game
	OR = {
		original_tag = ENG
		original_tag = FRA
		original_tag = USA

		original_tag = GER
		original_tag = ITA
		original_tag = JAP

		original_tag = SOV

		AND = { is_major = yes num_of_military_factories > 200 } #in the unlikely event that some minor AI becomes very powerful
	}
}

civil_war_country = { # civil war country tags
	OR = {
		tag = D01
		tag = D02
		tag = D03
		tag = D04
		tag = D05
		tag = D06
		tag = D07
		tag = D08
		tag = D09
		tag = D10
		tag = D11
		tag = D12
		tag = D13
		tag = D14
		tag = D15
	}
}

neutral_country = { # true neutrals
	NOT = { has_war = yes }
	OR = {
		tag = BEL
		tag = SWI
		tag = SWE
		tag = IRE
	}
}

named_variants = { # countries that have properly named variants in variant creation events
	OR = {
		original_tag = ENG
		original_tag = FRA
		original_tag = USA

		original_tag = GER
		original_tag = ITA
		original_tag = JAP

		original_tag = SOV
	}
}

prefer_artillery_design = { # true if artillery designs are preferable
	OR = {
		AND = { #infantry armies dont need spec ops advisor
			has_country_flag = infantry_army_focus
			OR = {
				has_idea_with_trait = army_artillery_3 has_available_idea_with_traits = { idea = army_artillery_3 limit = 1 }
				has_idea_with_trait = army_artillery_2 has_available_idea_with_traits = { idea = army_artillery_2 limit = 1 }
				has_idea_with_trait = army_artillery_1 has_available_idea_with_traits = { idea = army_artillery_1 limit = 1 }
			}
		}
		AND = { #spec ops advisor of the same rank is better
			OR = { has_idea_with_trait = army_artillery_3 has_available_idea_with_traits = { idea = army_artillery_3 limit = 1 } }
			NOT = { has_idea_with_trait = army_commando_3 has_available_idea_with_traits = { idea = army_commando_3 limit = 1 } }
		}
		AND = {
			OR = { has_idea_with_trait = army_artillery_2 has_available_idea_with_traits = { idea = army_artillery_2 limit = 1 } }
			NOT = {
				has_idea_with_trait = army_commando_2 has_available_idea_with_traits = { idea = army_commando_2 limit = 1 }
				has_idea_with_trait = army_commando_3 has_available_idea_with_traits = { idea = army_commando_3 limit = 1 }
			}
		}
		AND = {
			OR = { has_idea_with_trait = army_artillery_1 has_available_idea_with_traits = { idea = army_artillery_2 limit = 1 } }
			NOT = {
				has_idea_with_trait = army_commando_1 has_available_idea_with_traits = { idea = army_commando_1 limit = 1 }
				has_idea_with_trait = army_commando_2 has_available_idea_with_traits = { idea = army_commando_2 limit = 1 }
				has_idea_with_trait = army_commando_3 has_available_idea_with_traits = { idea = army_commando_3 limit = 1 }
			}
		}
	}
}

mobilize_army = { # triggers the AI to build more units if threatened
	################## makes things easier for the AI

	if = { limit = { tag = POL } GER = { is_ai = no } }
	if = { limit = { OR = { tag = BEL tag = HOL tag = LUX } } GER = { is_ai = no } }
	if = { limit = { tag = YUG } any_neighbor_country = { is_ai = no } }

	##################

	NOT = { has_war = yes major_country = yes }

	OR = {
		has_country_flag = mobilize_army

		any_neighbor_country = {
			capital_scope = { has_state_flag = original_capital_@PREV }
			any_state = {
				is_controlled_by = PREV
				is_in_home_area = yes
				any_neighbor_state = {
					is_controlled_by = ROOT
					is_in_home_area = yes
				}
			}
			OR = {
				has_added_tension_amount > 5
				has_war = yes

				any_other_country = { is_justifying_wargoal_against = PREV }
				any_other_country = { has_wargoal_against = PREV }

				is_justifying_wargoal_against = ROOT
				has_wargoal_against = ROOT
			}
		}
	}
}

can_raise_conscription_law = { # checks if conscription law can be raised up to service by requirement
	has_political_power > 0

	OR = {
		AND = {
			#has_idea = volunteer_only

			#law req
			NOT = { has_idea = undisturbed_isolation }
			NOT = { has_idea = isolation }
			if = {
				limit = {
					original_tag = AST
					has_dlc = "Together for Victory"
				}
				has_completed_focus = AST_citizen_military_forces
			}
			if = {
				limit = {
					original_tag = CAN
					has_dlc = "Together for Victory"
				}
				has_completed_focus = CAN_commit_to_the_war
			}
			if = {
				limit = {
					original_tag = RAJ
					has_dlc = "Together for Victory"
				}
				is_subject = no
			}
			if = {
				limit = {
					original_tag = HUN
					has_dlc = "Death or Dishonor"
				}
				NOT = { has_idea = HUN_treaty_of_triannon }
			}
		}
		AND = {
			#has_idea = limited_conscription

			#law req
			OR = {
				has_government = fascism
				has_government = communism
				AND = {
					has_war = yes
					enemies_strength_ratio > 0.5
					#any_enemy_country = {
					#	strength_ratio = {
					#		tag = ROOT
					#		ratio > 0.5
					#	}
					#}
				}
			}
			#Special rules AST in TFV
			if = {
				limit = {
					original_tag = AST
					has_dlc = "Together for Victory"
				}
				has_completed_focus = AST_citizen_military_forces
				has_completed_focus = AST_fight_work_or_perish
			}
			if = {
				limit = {
					original_tag = CAN
					has_dlc = "Together for Victory"
				}
				has_completed_focus = CAN_commit_to_the_war
				has_completed_focus = CAN_if_day
			}
			if = {
				limit = {
					original_tag = RAJ
					has_dlc = "Together for Victory"
				}
				is_subject = no
			}
			if = {
				limit = {
					original_tag = HUN
					has_dlc = "Death or Dishonor"
				}
				NOT = { has_idea = HUN_treaty_of_triannon }
			}
		}
		AND = {
			#has_idea = extensive_conscription

			#law req
			OR = {
				has_government = fascism
				has_government = communism
				AND = {
					has_war = yes
					enemies_strength_ratio > 0.6
					#any_enemy_country = {
					#	strength_ratio = {
					#		tag = ROOT
					#		ratio > 0.6
					#	}
					#}
				}
			}

			if = {
				limit = {
					original_tag = AST
					has_dlc = "Together for Victory"
				}
				has_completed_focus = AST_citizen_military_forces
				has_completed_focus = AST_fight_work_or_perish
			}

			if = {
				limit = {
					original_tag = CAN
					has_dlc = "Together for Victory"
				}
				OR = {
					has_completed_focus = CAN_compromise_with_quebec
					has_completed_focus = CAN_forced_quebec_conscription
				}
			}
			if = {
				limit = {
					original_tag = RAJ
					has_dlc = "Together for Victory"
				}
				is_subject = no
			}
			if = {
				limit = {
					original_tag = HUN
					has_dlc = "Death or Dishonor"
				}
				NOT = { has_idea = HUN_treaty_of_triannon }
			}
		}
	}
}

use_infantry_army_comp = {
	OR = {
		has_country_flag = infantry_army_focus
		AND = { has_country_flag = marine_army_focus NOT = { ai_has_role_template = marine } }
		AND = { has_country_flag = mountaineer_army_focus NOT = { ai_has_role_template = mountaineer } }
		num_of_military_factories < 5
	}
}

use_marine_army_comp = { 
	has_country_flag = marine_army_focus
	ai_has_role_template = marine
	NOT = { num_of_military_factories < 5 }
}

use_mountaineer_army_comp = {
	has_country_flag = mountaineer_army_focus
	ai_has_role_template = mountaineer
	NOT = { num_of_military_factories < 5 }
}

use_cheap_infantry = {
	num_of_military_factories < 5
}

######################################################
#	production
######################################################

prioritise_screen_ships = {
	any_enemy_country = { has_navy_size = { size > 20 } }
	
	OR = { has_tech = basic_destroyer has_tech = basic_light_cruiser }
	
	NOT = { has_equipment = { convoy < 100 } }
	
	OR = {
		has_navy_size = { size < 20 }
		AND = { has_navy_size = { size > 20  } has_navy_size = { size < 15 type = screen_ship } }
		AND = { has_navy_size = { size > 24  } has_navy_size = { size < 18 type = screen_ship } }
		AND = { has_navy_size = { size > 28  } has_navy_size = { size < 21 type = screen_ship } }
		AND = { has_navy_size = { size > 32  } has_navy_size = { size < 24 type = screen_ship } }
		AND = { has_navy_size = { size > 36  } has_navy_size = { size < 27 type = screen_ship } }
		AND = { has_navy_size = { size > 40  } has_navy_size = { size < 30 type = screen_ship } }
		AND = { has_navy_size = { size > 44  } has_navy_size = { size < 33 type = screen_ship } }
		AND = { has_navy_size = { size > 48  } has_navy_size = { size < 36 type = screen_ship } }
		AND = { has_navy_size = { size > 52  } has_navy_size = { size < 39 type = screen_ship } }
		AND = { has_navy_size = { size > 56  } has_navy_size = { size < 42 type = screen_ship } }
		AND = { has_navy_size = { size > 60  } has_navy_size = { size < 45 type = screen_ship } }
		AND = { has_navy_size = { size > 64  } has_navy_size = { size < 48 type = screen_ship } }
		AND = { has_navy_size = { size > 68  } has_navy_size = { size < 51 type = screen_ship } }
		AND = { has_navy_size = { size > 72  } has_navy_size = { size < 54 type = screen_ship } }
		AND = { has_navy_size = { size > 76  } has_navy_size = { size < 57 type = screen_ship } }
		AND = { has_navy_size = { size > 80  } has_navy_size = { size < 60 type = screen_ship } }
		AND = { has_navy_size = { size > 84  } has_navy_size = { size < 63 type = screen_ship } }
		AND = { has_navy_size = { size > 88  } has_navy_size = { size < 66 type = screen_ship } }
		AND = { has_navy_size = { size > 92  } has_navy_size = { size < 69 type = screen_ship } }
		AND = { has_navy_size = { size > 96  } has_navy_size = { size < 72 type = screen_ship } }
		AND = { has_navy_size = { size > 100 } has_navy_size = { size < 75 type = screen_ship } }
		AND = { has_navy_size = { size > 104 } has_navy_size = { size < 78 type = screen_ship } }
		AND = { has_navy_size = { size > 108 } has_navy_size = { size < 81 type = screen_ship } }
		AND = { has_navy_size = { size > 112 } has_navy_size = { size < 84 type = screen_ship } }
		AND = { has_navy_size = { size > 116 } has_navy_size = { size < 87 type = screen_ship } }
		AND = { has_navy_size = { size > 120 } has_navy_size = { size < 90 type = screen_ship } }
		AND = { has_navy_size = { size > 124 } has_navy_size = { size < 93 type = screen_ship } }
		AND = { has_navy_size = { size > 128 } has_navy_size = { size < 96 type = screen_ship } }
		AND = { has_navy_size = { size > 132 } has_navy_size = { size < 99 type = screen_ship } }
		AND = { has_navy_size = { size > 136 } has_navy_size = { size < 102 type = screen_ship } }
		AND = { has_navy_size = { size > 140 } has_navy_size = { size < 105 type = screen_ship } }
		AND = { has_navy_size = { size > 144 } has_navy_size = { size < 108 type = screen_ship } }
		AND = { has_navy_size = { size > 148 } has_navy_size = { size < 111 type = screen_ship } }
		AND = { has_navy_size = { size > 152 } has_navy_size = { size < 114 type = screen_ship } }
		AND = { has_navy_size = { size > 156 } has_navy_size = { size < 117 type = screen_ship } }
		AND = { has_navy_size = { size > 160 } has_navy_size = { size < 120 type = screen_ship } }
		AND = { has_navy_size = { size > 164 } has_navy_size = { size < 123 type = screen_ship } }
		AND = { has_navy_size = { size > 168 } has_navy_size = { size < 126 type = screen_ship } }
		AND = { has_navy_size = { size > 172 } has_navy_size = { size < 129 type = screen_ship } }
		AND = { has_navy_size = { size > 176 } has_navy_size = { size < 132 type = screen_ship } }
		AND = { has_navy_size = { size > 180 } has_navy_size = { size < 135 type = screen_ship } }
		AND = { has_navy_size = { size > 184 } has_navy_size = { size < 138 type = screen_ship } }
		AND = { has_navy_size = { size > 188 } has_navy_size = { size < 141 type = screen_ship } }
		AND = { has_navy_size = { size > 192 } has_navy_size = { size < 144 type = screen_ship } }
		AND = { has_navy_size = { size > 196 } has_navy_size = { size < 147 type = screen_ship } }
		AND = { has_navy_size = { size > 200 } has_navy_size = { size < 150 type = screen_ship } }
	}
}

prioritise_capital_ships = {
	any_enemy_country = { has_navy_size = { size > 20 } }
	
	OR = { has_tech = basic_battleship has_tech = basic_carrier }
	
	NOT = { has_equipment = { convoy < 100 } }
	
	OR = {
		AND = { has_navy_size = { size > 20  } NOT = { has_navy_size = { size > 25  } } has_navy_size = { size > 16 type = screen_ship } }
		AND = { has_navy_size = { size > 25  } NOT = { has_navy_size = { size > 30  } } has_navy_size = { size > 20 type = screen_ship } }
		AND = { has_navy_size = { size > 30  } NOT = { has_navy_size = { size > 35  } } has_navy_size = { size > 24 type = screen_ship } }
		AND = { has_navy_size = { size > 35  } NOT = { has_navy_size = { size > 40  } } has_navy_size = { size > 28 type = screen_ship } }
		AND = { has_navy_size = { size > 40  } NOT = { has_navy_size = { size > 45  } } has_navy_size = { size > 32 type = screen_ship } }
		AND = { has_navy_size = { size > 45  } NOT = { has_navy_size = { size > 50  } } has_navy_size = { size > 36 type = screen_ship } }
		AND = { has_navy_size = { size > 50  } NOT = { has_navy_size = { size > 55  } } has_navy_size = { size > 40 type = screen_ship } }
		AND = { has_navy_size = { size > 55  } NOT = { has_navy_size = { size > 60  } } has_navy_size = { size > 44 type = screen_ship } }
		AND = { has_navy_size = { size > 60  } NOT = { has_navy_size = { size > 65  } } has_navy_size = { size > 48 type = screen_ship } }
		AND = { has_navy_size = { size > 65  } NOT = { has_navy_size = { size > 70  } } has_navy_size = { size > 52 type = screen_ship } }
		AND = { has_navy_size = { size > 70  } NOT = { has_navy_size = { size > 75  } } has_navy_size = { size > 56 type = screen_ship } }
		AND = { has_navy_size = { size > 75  } NOT = { has_navy_size = { size > 80  } } has_navy_size = { size > 60 type = screen_ship } }
		AND = { has_navy_size = { size > 80  } NOT = { has_navy_size = { size > 85  } } has_navy_size = { size > 64 type = screen_ship } }
		AND = { has_navy_size = { size > 85  } NOT = { has_navy_size = { size > 90  } } has_navy_size = { size > 68 type = screen_ship } }
		AND = { has_navy_size = { size > 90  } NOT = { has_navy_size = { size > 95  } } has_navy_size = { size > 72 type = screen_ship } }
		AND = { has_navy_size = { size > 95  } NOT = { has_navy_size = { size > 100 } } has_navy_size = { size > 76 type = screen_ship } }
		AND = { has_navy_size = { size > 100 } NOT = { has_navy_size = { size > 105 } } has_navy_size = { size > 80 type = screen_ship } }
		AND = { has_navy_size = { size > 105 } NOT = { has_navy_size = { size > 110 } } has_navy_size = { size > 84 type = screen_ship } }
		AND = { has_navy_size = { size > 110 } NOT = { has_navy_size = { size > 115 } } has_navy_size = { size > 88 type = screen_ship } }
		AND = { has_navy_size = { size > 115 } NOT = { has_navy_size = { size > 120 } } has_navy_size = { size > 92 type = screen_ship } }
		AND = { has_navy_size = { size > 120 } NOT = { has_navy_size = { size > 125 } } has_navy_size = { size > 96 type = screen_ship } }
		AND = { has_navy_size = { size > 125 } NOT = { has_navy_size = { size > 130 } } has_navy_size = { size > 100 type = screen_ship } }
		AND = { has_navy_size = { size > 130 } NOT = { has_navy_size = { size > 135 } } has_navy_size = { size > 104 type = screen_ship } }
		AND = { has_navy_size = { size > 135 } NOT = { has_navy_size = { size > 140 } } has_navy_size = { size > 108 type = screen_ship } }
		AND = { has_navy_size = { size > 140 } NOT = { has_navy_size = { size > 145 } } has_navy_size = { size > 112 type = screen_ship } }
		AND = { has_navy_size = { size > 145 } NOT = { has_navy_size = { size > 150 } } has_navy_size = { size > 116 type = screen_ship } }
		AND = { has_navy_size = { size > 150 } NOT = { has_navy_size = { size > 155 } } has_navy_size = { size > 120 type = screen_ship } }
		AND = { has_navy_size = { size > 155 } NOT = { has_navy_size = { size > 160 } } has_navy_size = { size > 124 type = screen_ship } }
		AND = { has_navy_size = { size > 160 } NOT = { has_navy_size = { size > 165 } } has_navy_size = { size > 128 type = screen_ship } }
		AND = { has_navy_size = { size > 165 } NOT = { has_navy_size = { size > 170 } } has_navy_size = { size > 132 type = screen_ship } }
		AND = { has_navy_size = { size > 170 } NOT = { has_navy_size = { size > 175 } } has_navy_size = { size > 136 type = screen_ship } }
		AND = { has_navy_size = { size > 175 } NOT = { has_navy_size = { size > 180 } } has_navy_size = { size > 140 type = screen_ship } }
		AND = { has_navy_size = { size > 180 } NOT = { has_navy_size = { size > 185 } } has_navy_size = { size > 144 type = screen_ship } }
		AND = { has_navy_size = { size > 185 } NOT = { has_navy_size = { size > 190 } } has_navy_size = { size > 148 type = screen_ship } }
		AND = { has_navy_size = { size > 190 } NOT = { has_navy_size = { size > 195 } } has_navy_size = { size > 152 type = screen_ship } }
		AND = { has_navy_size = { size > 195 } NOT = { has_navy_size = { size > 200 } } has_navy_size = { size > 156 type = screen_ship } }
		AND = { has_navy_size = { size > 200 } NOT = { has_navy_size = { size > 205 } } has_navy_size = { size > 160 type = screen_ship } }
		AND = { has_navy_size = { size > 205 } NOT = { has_navy_size = { size > 210 } } has_navy_size = { size > 164 type = screen_ship } }
		AND = { has_navy_size = { size > 210 } NOT = { has_navy_size = { size > 215 } } has_navy_size = { size > 168 type = screen_ship } }
		AND = { has_navy_size = { size > 215 } NOT = { has_navy_size = { size > 220 } } has_navy_size = { size > 172 type = screen_ship } }
		AND = { has_navy_size = { size > 220 } NOT = { has_navy_size = { size > 225 } } has_navy_size = { size > 176 type = screen_ship } }
		AND = { has_navy_size = { size > 225 } NOT = { has_navy_size = { size > 230 } } has_navy_size = { size > 180 type = screen_ship } }
		AND = { has_navy_size = { size > 230 } NOT = { has_navy_size = { size > 235 } } has_navy_size = { size > 184 type = screen_ship } }
		AND = { has_navy_size = { size > 235 } NOT = { has_navy_size = { size > 240 } } has_navy_size = { size > 188 type = screen_ship } }
		AND = { has_navy_size = { size > 240 } NOT = { has_navy_size = { size > 245 } } has_navy_size = { size > 192 type = screen_ship } }
		AND = { has_navy_size = { size > 245 } NOT = { has_navy_size = { size > 250 } } has_navy_size = { size > 196 type = screen_ship } }
	}
}

# army size limits for minors
army_limit_3000k = {
	OR = {
		AND = { original_tag = CHI OR = { has_country_flag = EAI_country_difficulty has_country_flag EAI_desperate_defense JAP = { is_ai = no } date > 1941.1.1 } }
		AND = { original_tag = PRC OR = { has_country_flag = EAI_country_difficulty has_country_flag EAI_desperate_defense JAP = { is_ai = no } date > 1941.1.1 } }
	}
}
army_limit_1250k = {
	OR = {
		AND = { original_tag = CHI is_major = no OR = { has_country_flag = EAI_country_difficulty has_country_flag EAI_desperate_defense JAP = { is_ai = no } date > 1941.1.1 } }
		AND = { original_tag = PRC is_major = no OR = { has_country_flag = EAI_country_difficulty has_country_flag EAI_desperate_defense JAP = { is_ai = no } date > 1941.1.1 } }

		AND = { original_tag = RAJ OR = { is_puppet = no has_tech = volkssturm has_tech = human_wave_offensive } }

		original_tag = BRA
	}
}
army_limit_1000k = {
	OR = {
		original_tag = POL
		original_tag = SPR
		original_tag = MEX
	}
}
army_limit_750k = {
	OR = {
		original_tag = POR
		original_tag = CZE
		original_tag = TUR
		original_tag = YUG
	}
}
army_limit_500k = {
	OR = {
		NOT = {
			major_country = yes
			army_limit_3000k = yes
			army_limit_1250k = yes
			army_limit_1000k = yes
			army_limit_750k = yes
			army_limit_250k = yes
			army_limit_0k = yes
		}

		AND = { original_tag = FRA has_civil_war = yes }

		AND = { original_tag = RAJ NOT = { is_puppet = no has_tech = volkssturm has_tech = human_wave_offensive } }
	}
}
army_limit_250k = {
	OR = {
		original_tag = NZL original_tag = SWI


		original_tag = SIK original_tag = SIA original_tag = MON original_tag = TIB original_tag = NEP original_tag = BHU


		original_tag = AFG original_tag = IRQ original_tag = PER original_tag = YEM original_tag = SAU original_tag = OMA


		original_tag = LIB


		original_tag = PHI original_tag = INS original_tag = MAL


		original_tag = PAR original_tag = BOL original_tag = PRU original_tag = URG

		original_tag = ECU original_tag = COS original_tag = NIC original_tag = HON

		original_tag = ELS original_tag = GUA original_tag = CUB original_tag = HAI


		original_tag = HOL original_tag = BEL original_tag = LUX


		original_tag = LIT original_tag = LAT original_tag = EST

		original_tag = NOR original_tag = FIN original_tag = DEN


		original_tag = ETH


		AND = { original_tag = CHI NOT = { has_country_flag = EAI_country_difficulty has_country_flag EAI_desperate_defense } JAP = { is_ai = yes } date < 1941.1.1 }
		AND = { original_tag = PRC NOT = { has_country_flag = EAI_country_difficulty has_country_flag EAI_desperate_defense } JAP = { is_ai = yes } date < 1941.1.1 }

		AND = { OR = { original_tag = XSM original_tag = GXC original_tag = YUN original_tag = SHX } OR = { JAP = { is_ai = no } has_war = yes } }
	}
}
army_limit_0k = {
	OR = {
		AND = { OR = { original_tag = XSM original_tag = GXC original_tag = YUN original_tag = SHX } JAP = { is_ai = yes has_war = no } }
	}
}

# excludes tags from certain production limits
exclude_minor_from_production_limit_A = {
	OR = {
		original_tag = CHI
	}
}

exclude_major_from_production_limit_A = {
	OR = {
		original_tag = GER
		original_tag = JAP
		original_tag = SOV
	}
}
exclude_major_from_production_limit_B = {
	OR = {
		original_tag = JAP
		original_tag = SOV
	}
}
exclude_major_from_production_limit_C = {
	OR = {
		original_tag = SOV
	}
}

######################################################
#	TECH BONUS CHECKS (until has_tech_bonus is fixed)
######################################################

naval_doctrine_tech_bonus = {
	OR = {
		AND = {
			original_tag = USA
			has_completed_focus = USA_fund_the_navy
		}
		AND = {
			original_tag = ENG
			has_completed_focus = uk_waves_focus
		}
	}
}

armor_tech_bonus = {
	OR = {
		AND = {
			original_tag = GER
			OR = { has_opinion_modifier = sov_ger_treaty_trade has_completed_focus = GER_army_innovation_2 }
		}
		AND = {
			original_tag = SOV
			OR = { has_opinion_modifier = sov_ger_treaty_trade has_completed_focus = SOV_lessons_of_war }
		}
		AND = {
			original_tag = FRA
			OR = {
				AND = { has_country_flag = at_design_HTD has_completed_focus = FRA_heavy_armor_focus }
				AND = { has_country_flag = at_design_MTD has_completed_focus = FRA_light_medium_armor }
			}
		}
		AND = {
			original_tag = ENG
			has_completed_focus = ENG_tank_focus
		}
		AND = {
			original_tag = ITA
			has_completed_focus = ITA_armored_effort
		}
		AND = {
			original_tag = JAP
			has_completed_focus = armor_innovations_focus
		}
	}
}

GER_SOV_armor_tech_bonus = {
	OR = {
		AND = {
			original_tag = GER
			OR = { has_opinion_modifier = sov_ger_treaty_trade has_completed_focus = GER_army_innovation_2 }
		}
		AND = {
			original_tag = SOV
			OR = { has_opinion_modifier = sov_ger_treaty_trade has_completed_focus = SOV_lessons_of_war }
		}
	}
}

fighter_tech_bonus = {
	OR = {
		AND = { original_tag = ENG has_completed_focus = fighter_command_focus }
		AND = { original_tag = ITA has_completed_focus = ITA_air_innovation_2 }
		AND = { original_tag = JAP has_completed_focus = naval_air_innovations_focus }
	}
}

carrier_tech_bonus = {
	OR = {
		AND = { original_tag = ENG has_completed_focus = uk_carrier_focus }
		AND = { original_tag = USA has_completed_focus = USA_carrier_primacy }
		AND = { original_tag = JAP has_completed_focus = carrier_focus }
	}
}